<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="experience-api-test-suite.xml" />
	<munit:test name="experience-api-test-suite-task-update-experience-api-mainTest" doc:id="dda76df0-d5a8-40b6-9554-941e8ae2cc64" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="d06c3af3-107c-4718-b591-6cd737c1a7bd" processor="http:listener">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="experience-api-httpListenerConfig" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="${listener.path}" attributeName="path" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Event" doc:id="ecb073fa-be49-4d92-bc5d-c64de227c5b4" >
				<munit:payload value='#[{&#10;  issue: {&#10;    key: "KAN-1",&#10;    fields: {&#10;      summary: "for the poc3",&#10;      assignee: {&#10;        displayName: "0569-sriram"&#10;      },&#10;      duedate: null,&#10;      project: {&#10;        name: "FLP_Batch-7"&#10;      }&#10;    }&#10;  },&#10;  changelog: {&#10;    items: [&#10;      {&#10;        fromString: "To Do"&#10;      }&#10;    ]&#10;  }&#10;}]' />
			</munit:set-event>
			  
     
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to task-update-experience-api-main" doc:id="16bea1fb-4646-40cd-b603-f5699b71d28e" name="task-update-experience-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="54f2b5a0-9003-4e4b-8fb6-2c0899f102f8" is='#[MunitTools::equalTo({&#10; "taskId": "KAN-1",&#10;  "title": "for the poc3",&#10;  "status": "To Do",&#10;  "assignee": "0569-sriram",&#10;  "dueDate": null,&#10;  "project": "FLP_Batch-7"&#10;&#10;})]' expression='#[payload]'/>
		</munit:validation>
	</munit:test>
	<munit:test name="experience-api-test-suite-post:\task-update:application\json:task-update-experience-api-configTest" doc:id="41dd9d2a-a564-4ccb-aef0-1302fe03f020" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="48523fd9-be32-4b40-bf21-3ebe4b3930fe" processor="flow">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="post:\task-update:application\json:task-update-experience-api-config" attributeName="name" />
					<munit-tools:with-attribute whereValue="2e0df9f8-465a-4406-82ab-2997ab5ec9c9" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Event" doc:id="362b1012-b033-448f-a269-16969f07032f" >
				<munit:payload value='#[{&#10;"taskId": "KAN-1",&#10;  "title": "for the poc3",&#10;  "status": "To Do",&#10;  "assignee": "0569-sriram",&#10;  "dueDate": null,&#10;  "project": "FLP_Batch-7"&#10;  }]' />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to post:\task-update:application\json:task-update-experience-api-config" doc:id="c610ab87-aab0-4ad5-993a-7fd1026a3405" name="post:\task-update:application\json:task-update-experience-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="5cf0a1f2-61d3-4108-9956-347cc167c8ae" is='#[MunitTools::equalTo({&#10; "taskId": "KAN-1",&#10;  "title": "for the poc3",&#10;  "status": "To Do",&#10;  "assignee": "0569-sriram",&#10;  "dueDate": null,&#10;  "project": "FLP_Batch-7"&#10;&#10;})]' expression="#[payload]"/>
		</munit:validation>
	</munit:test>


</mule>
